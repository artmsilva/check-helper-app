<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Browser Compatibility Check</title>
    <style>
      body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
          sans-serif;
        max-width: 800px;
        margin: 0 auto;
        padding: 2rem;
        line-height: 1.6;
      }
      .status {
        padding: 1rem;
        margin: 1rem 0;
        border-radius: 8px;
        border: 2px solid;
      }
      .supported {
        background: #d4edda;
        border-color: #28a745;
        color: #155724;
      }
      .not-supported {
        background: #f8d7da;
        border-color: #dc3545;
        color: #721c24;
      }
      .warning {
        background: #fff3cd;
        border-color: #ffc107;
        color: #856404;
      }
      code {
        background: #f8f9fa;
        padding: 0.2rem 0.4rem;
        border-radius: 4px;
        font-family: "SF Mono", Monaco, "Cascadia Code", monospace;
      }
    </style>
  </head>
  <body>
    <h1>üîç Browser Compatibility Check</h1>
    <p>
      This page checks if your browser supports the modern web standards used by
      the Check Helper app.
    </p>

    <div id="es-modules-status" class="status">
      <h3>ES Modules Support</h3>
      <p id="es-modules-text">Checking...</p>
    </div>

    <div id="import-maps-status" class="status">
      <h3>Import Maps Support</h3>
      <p id="import-maps-text">Checking...</p>
    </div>

    <div id="web-components-status" class="status">
      <h3>Web Components Support</h3>
      <p id="web-components-text">Checking...</p>
    </div>

    <div id="overall-status" class="status">
      <h3>Overall Compatibility</h3>
      <p id="overall-text">Checking...</p>
    </div>

    <div style="margin-top: 2rem">
      <h2>Browser Requirements</h2>
      <ul>
        <li><strong>Chrome 89+</strong> (March 2021) - Full support</li>
        <li><strong>Firefox 87+</strong> (March 2021) - Full support</li>
        <li><strong>Safari 14+</strong> (September 2020) - Full support</li>
        <li><strong>Edge 89+</strong> (March 2021) - Full support</li>
      </ul>

      <h2>What if my browser isn't supported?</h2>
      <p>
        The app uses cutting-edge web standards. If your browser doesn't support
        these features:
      </p>
      <ul>
        <li>Update to the latest browser version</li>
        <li>Use a modern browser like Chrome, Firefox, Safari, or Edge</li>
        <li>
          The app gracefully degrades and will show helpful error messages
        </li>
      </ul>
    </div>

    <script>
      // Check ES Modules support
      function checkESModules() {
        const script = document.createElement("script");
        script.type = "module";
        const supported = "noModule" in script;

        const statusDiv = document.getElementById("es-modules-status");
        const textEl = document.getElementById("es-modules-text");

        if (supported) {
          statusDiv.className = "status supported";
          textEl.textContent = "‚úÖ Your browser supports ES Modules!";
        } else {
          statusDiv.className = "status not-supported";
          textEl.textContent =
            "‚ùå ES Modules not supported. Please update your browser.";
        }

        return supported;
      }

      // Check Import Maps support
      function checkImportMaps() {
        const supported =
          HTMLScriptElement.supports && HTMLScriptElement.supports("importmap");

        const statusDiv = document.getElementById("import-maps-status");
        const textEl = document.getElementById("import-maps-text");

        if (supported) {
          statusDiv.className = "status supported";
          textEl.textContent = "‚úÖ Your browser supports Import Maps!";
        } else {
          statusDiv.className = "status not-supported";
          textEl.innerHTML =
            "‚ùå Import Maps not supported. The app will fall back to relative imports, but may have issues. Consider updating to Chrome 89+, Firefox 87+, or Safari 14+.";
        }

        return supported;
      }

      // Check Web Components support
      function checkWebComponents() {
        const supported =
          "customElements" in window && "attachShadow" in Element.prototype;

        const statusDiv = document.getElementById("web-components-status");
        const textEl = document.getElementById("web-components-text");

        if (supported) {
          statusDiv.className = "status supported";
          textEl.textContent = "‚úÖ Your browser supports Web Components!";
        } else {
          statusDiv.className = "status not-supported";
          textEl.textContent =
            "‚ùå Web Components not supported. Please update your browser.";
        }

        return supported;
      }

      // Overall compatibility check
      function checkOverall() {
        const esModules = checkESModules();
        const importMaps = checkImportMaps();
        const webComponents = checkWebComponents();

        const statusDiv = document.getElementById("overall-status");
        const textEl = document.getElementById("overall-text");

        if (esModules && importMaps && webComponents) {
          statusDiv.className = "status supported";
          textEl.innerHTML =
            'üéâ Perfect! Your browser supports all features. <a href="/">Launch the Check Helper App</a>';
        } else if (esModules && webComponents) {
          statusDiv.className = "status warning";
          textEl.innerHTML =
            '‚ö†Ô∏è Mostly compatible. Import Maps not supported but the app should still work with fallbacks. <a href="/">Try the Check Helper App</a>';
        } else {
          statusDiv.className = "status not-supported";
          textEl.innerHTML =
            "‚ùå Your browser is missing critical features. Please update to a modern browser before using the app.";
        }
      }

      // Run checks when page loads
      document.addEventListener("DOMContentLoaded", checkOverall);
    </script>
  </body>
</html>
